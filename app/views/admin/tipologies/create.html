<div ng-include src="'views/admin/navBarAdmin.html'"></div>

<script>
    jQuery(document).ready(function () {
        jQuery("#formID").validationEngine('attach');
    });
</script>

<div ng-if="message" class="alert alert-danger" role="alert">
    {{message}}
</div>


<div class="container">
    <div class="col-md-2"></div>
    <div class="col-md-8">
        <h2 style="text-align: center">EDITAR TIPOLOGIA</h2>


        <form class="form-horizontal" role="form" ng-submit="updateTipology()" id="formID">

            <div id="menu" class="form-group">
                <select id="drop" name="drop" class="form-control notBorder" ng-model="tipologyId"
                        ng-change="editTipology()">
                    <option value="" disabled selected hidden>Seleccione ...</option>
                    <option value="{{tipology.id}}" ng-repeat="tipology in tipologies">{{tipology.name}}
                    </option>
                </select>
                </div>

            <div id="preload" style="display:none; position:absolute; top:80%; margin-left:37%;">
                <img src="../../../images/loading_spinner.gif"/>
                </div>


            <div id="content" style="display:none;" class="form-group">
                </br>

                <div class="form-group">

                    <div>
                        <textarea style="min-width: 100%" type="text" ng-model="tipology.name"></textarea>
                    </div>

                    <div>
                        <textarea style="min-width: 100%" rows="4" ng-model="tipology.description"></textarea>
                    </div>

                    <div>
                        <textarea style="min-width: 100%" rows="4" type="textarea"
                                  ng-model="tipology.descriptionExtra"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <h3 style="text-align: center">SUB-AMBITOS ASOCIADOS</h3></br>
                    <ul class="list-group checked-list-box">
                        <li class="list-group-item" ng-repeat="subambito in subAmbitos">
                            <input style="margin-right:10px;" type="checkbox" ng-model="subambitos[subambito.id]"
                                   value="subambito.id">{{subambito.name}}
                        </li>
                    </ul>
                </div>

                <div class="form-group">
                    <input type="submit" class="btn btn-md btn-primary center-block" value="ACTUALIZAR">
                </div>
                </div>
        </form>
    </div>
    <div class="col-md-2"></div>
</div>

<script type="text/javascript">
    var elem = document.getElementById("drop");
    elem.onchange = function () {

        document.getElementById("preload").style.display = (this.value == "") ? "none" : "block";

        $("#menu").delay(0).fadeOut(50, function () {
            $(this).hide();
            $("#preload").delay(0).fadeOut(3000, function () {
                $(this).hide();
            });
        });
        $("#content").delay(3000).fadeIn(1000);
    };
</script>